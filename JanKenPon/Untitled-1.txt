import sys
import pygame
import pickle
import glob

from pygame.locals import QUIT, MOUSEBUTTONDOWN




sysfont = pygame.font.SysFont(None, 80)
texttext = sysfont.render("output", False, (255, 255, 255))


def main():
    pygame.init()
    pygame.display.set_caption("Pygame Test")
    screen = pygame.display.set_mode((640, 480))

    depth = 0
    buff = []

    fileList = glob.glob('test/*')
    if len(fileList) != 1:
        pygame.quit()
        sys.exit()

    while(True):
        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()

            elif event.type == MOUSEBUTTONDOWN and event.button == 1:
                x, y = event.pos
                buff.append(lineInfo(depth, x, y))

            elif event.type == MOUSEBUTTONDOWN and event.button == 3:
                depth += 1


        screen.fill((0, 0, 0))

        prev = 0
        buff_list = []

        for list in buff:
            if list.depth == prev:
                buff_list += (list.x, list.y)
            else:
                if len(buff_list) > 1:
                    pygame.draw.lines(screen, (255, 255, 255), False, buff_list)
                else:
                    pygame.draw.circle(screen, (255, 255, 255), buff_list[0], 5)
                buff_list = []
                buff_list += (list.x, list.y)
            prev = list.depth

        pygame.display.update()


if __name__ == "__main__":
    main()





class lineInfo:
    def __init__(self, depth, x, y):
        self.depth = depth
        self.x = x
        self.y = y


def OutputData(name, list):
    with open(name, 'w') as f:
        pickle.dump(list, f)


def InputData(name):
    list = []
    with open(name,"rb") as f:
        list = pickle.load(f)

    return list


# 1.文字を表示する
# 2.四角を表示する
# 3.上記をspriteにする
# 4.マウス位置を記憶するspriteを用意
# 5.この２つを比べて衝突したかでボタンが押されているかが分かる



